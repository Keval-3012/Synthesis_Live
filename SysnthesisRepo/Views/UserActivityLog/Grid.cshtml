@model IEnumerable<EntityModels.Models.ActivityLog>
@using Utility   
@{

    Layout = null;
}
<style>
    .divIDClass {
        z-index: 999999 !important;
    }
</style>

<div class="animate-panelmessesgarea padbtmzero">


    @if (ViewBag.StatusMessage.ToString() == "Success")
    {
        <script>
            MyfunSuccess();
        </script>
    }
    @if (ViewBag.StatusMessage.ToString() == "Delete")
    {
        <script>
            MyfunSuccess();
        </script>
    }
    @if (ViewBag.StatusMessage.ToString() == "Error")
    {
        <script>
            MyfunError();
        </script>
    }
    @if (ViewBag.StatusMessage.ToString() == "NoItem")
    {
        <script>
            MyfunNoItem();
        </script>
    }
    @if (ViewBag.StatusMessage.ToString() == "Exists")
    {
        <script>
            MyfunExists();
        </script>
    }


</div>
<div id="grddata">
    <div class="page-body headertopbox addinvoice" style="padding-top:0px!important;">
        <div class="searchfinal" style="display:none">
            <div class="widget-body shadownone brdrgray">

                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                    <div class="dataTables_filter">
                        <table border="0" cellspacing="0" width="100%" style="text-align: right; margin-bottom: 0px;" cellpadding="0">

                            <tr>
                                <td width="265">
                                    <div class="input-group">
                                        <input name="txtSearchTitle" type="text" maxlength="100" id="txtSearchTitle" placeholder="Store Name" class="form-control m-b">
                                    </div>
                                    <div class="input-group">
                                        <input type="submit" name="btnSearch" value="Search" id="btnSearch" onclick="javascript:FunSearchRecord();" class=".searchfinal .btnsearchicon" />
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div> 

        @{if (Model.Count() > 0)
            {

                <div class="datagrid martop15">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th width="1%"  class="text-center">Action</th>
                                    <th>Activity</th>

                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    foreach (var item in Model)
                                    {
                                        <tr>
                                            <td width="1%"  class="text-center actionbtn img_with img_color">
                                                @if (item.Action == 1)
                                                {
                                                    <img src="../Content/Admin/images/plus.svg" />

                                                }
                                                else if (item.Action == 2)
                                                {
                                                    <img src="../Content/Admin/images/edit-2.svg" />
                                                }
                                                else if (item.Action == 3)
                                                {
                                                    <img src="../Content/Admin/images/trash-2.svg" />

                                                }
                                                else if (item.Action == 4)
                                                {
                                                    <img src="../Content/Admin/images/check.svg" />
                                                }
                                                else if (item.Action == 5)
                                                {
                                                    <img src="../Content/Admin/images/x.svg" class="fnt_set1" />
                                                }
                                                else if (item.Action == 6)
                                                {
                                                    <img src="../Content/Admin/images/slash.svg" />
                                                }
                                            </td>
                                           
                                            <td>@Html.Raw(item.Comment)</td>
                                        </tr>
                                   

                                    }
                                    <tr class="paginationGrid">
                                        <td colspan="2" class="left-text dataTables_length showdata" style="padding-top: 0px!important;">

                                            <div class="recordbox">

                                                <span class="selectbox">
                                                    @{
                                                        List<SelectListItem> listItem_Records = new List<SelectListItem>();
                                                        string[] Records = AdminSiteConfiguration.GetArrayForRecord().ToString().Split(',');
                                                        foreach (string word in Records)
                                                        {
                                                            listItem_Records.Add(new SelectListItem
                                                            {
                                                                Text = word.Split(':')[0],
                                                                Value = word.Split(':')[1]
                                                            });
                                                        }

                                                        @Html.DropDownList("SelectRecords", listItem_Records, new { @class = "myval", @onchange = "javascript:FunPageRecord(this.value);" })
                                                    }
                                                </span><span class="text_record">Records</span>
                                            </div>
                                            <div class="showdatabox">
                                                <span style="float:left">Showing @ViewBag.startIndex to @ViewBag.endIndex of @ViewBag.TotalDataCount entries</span>
                                            </div>
                                            <div class="pagination">
                                                @if (ViewBag.LastPageIndex > 1)
                                                {
                                                    if (ViewBag.CurrentPageIndex != 1)
                                                    {
                                                        <a id="btnPageFirst" style="cursor:pointer" onclick="javascript:FunPageIndex(1);" class=" Linkbutton firstpage nextbtn">First</a>
                                                        <a id="btnPagePrevious" style="cursor:pointer" onclick="javascript:FunPageIndex(@ViewBag.CurrentPageIndex    -1);" class=" Linkbutton Linkbutton prebtn">Previous</a>
                                                    }
                                                    int PageIndex = 3;
                                                    int StartPageIndex = ViewBag.CurrentPageIndex - PageIndex;//10-3=7
                                                    int EndPageIndex = ViewBag.CurrentPageIndex + PageIndex;//10+3=13

                                                    if (StartPageIndex < 1)
                                                    {
                                                        EndPageIndex = EndPageIndex - StartPageIndex;
                                                    }

                                                    if (EndPageIndex > ViewBag.LastPageIndex)
                                                    {
                                                        StartPageIndex = (StartPageIndex - (EndPageIndex - ViewBag.LastPageIndex)) + 1;
                                                    }

                                                    for (int i = 1; i <= @ViewBag.LastPageIndex; i++)
                                                    {

                                                        if ((StartPageIndex < i && EndPageIndex > i))
                                                        {
                                                            if (ViewBag.CurrentPageIndex == i)
                                                            {
                                                                <span Style="min-width: 25px; display: inline-block;">@i          </span>
                                                            }
                                                            else
                                                            {
                                                                <a id="btnnum" style="cursor:pointer" onclick="javascript:FunPageIndex(@i);">@i</a>
                                                            }
                                                        }
                                                    }
                                                    if (ViewBag.CurrentPageIndex != @ViewBag.LastPageIndex)
                                                    {
                                                        <a id="btnPageNext" style="cursor:pointer" onclick="javascript:FunPageIndex(@ViewBag.CurrentPageIndex    +1);" class=" Linkbutton nextbtn">Next</a>
                                                        <a id="btnPageLast" style="cursor:pointer" onclick="javascript:FunPageIndex(@ViewBag.LastPageIndex);" class=" Linkbutton lastpage nextbtn">Last</a>
                                                    }
                                                }
                                            </div>
                                        </td>
                                       
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

            }
        }
    </div>
</div>

<script>
    var StatusMessage = '@ViewBag.StatusMessage.ToString()';
    var OrderByVal = '@ViewBag.OrderByVal';
    var IsAscVal = '@ViewBag.IsAscVal';
    var PageSize = '@ViewBag.PageSize';
    var Alpha = '@ViewBag.Alpha';
    var SearchRecords = '@ViewBag.SearchRecords';
    var SearchTitle = '@ViewBag.SearchTitle';
    var CurrentPageIndex = '@ViewBag.CurrentPageIndex';
    var AscVal = '@ViewBag.AscVal';
</script>
<script src="~/Form_JS/UserActivityLog.js?version=@System.Configuration.ConfigurationManager.AppSettings["version"].ToString()"></script>