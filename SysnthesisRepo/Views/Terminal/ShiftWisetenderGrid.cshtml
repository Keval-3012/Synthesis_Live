@model EntityModels.Models.Terminal_Select
@using EntityModels.Models;
@using Utility;
@{
    Layout = null;
}
<style>
    .TextboxWidth {
        width: 100px;
    }

    .divIDClass2 {
        z-index: 999999 !important;
    }

    .settlemntdisplay {
        display: inherit;
        width: 30%;
    }

    .SettlementAmount {
        display: inherit;
        width: 20%;
    }
</style>
<script src="~/Content/Admin/js/toggle.js"></script>

@*<link href="~/Content/Admin/css/toggle.css" rel="stylesheet" />*@
@if (Convert.ToString(ViewBag.ErrorMessage) == "ExistShift")
{
    <script>
        MyCustomAlert("Shift Name Already Exist", "2");
    </script>
}
@if (Convert.ToString(ViewBag.ErrorMessage) == "Sucess")
{
    <script>
        MyfunSuccess();
    </script>
}
@if (Convert.ToString(ViewBag.ErrorMessage) == "NoItemFound")
{
    <script>
        MyfunNoItem();
    </script>
}
<div class="tab-content">
    <input type="hidden" id="iShitfGrid" />
    <div id="tenderdiv" class="tab-pane in active">
        @{
            if (Model.ShiftWisetenderData != null && Model.ShiftWisetenderData.Count > 0)
            {
                @Html.Hidden("SelectedShift")
                <div class="tabcntbox">
                    @using (Html.BeginForm("ShiftWisetenderGrid", "Terminal", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary(true)

                        <div class="row">
                            <div class="col-md-6 col-sm-9 PoSTitle">
                                <h1>@Model.ShiftWisetenderData[0].Terminalname</h1>
                                <p>
                                    <a href="@Url.Action("DownloadFile", "Report",new { @filePath=Model.ShiftWisetenderData[0].FileName})" target="_blank" style="font-size: 20px;color: #000;font-weight: 300;" title="Detail"> @Model.ShiftWisetenderData[0].StartTime to @Model.ShiftWisetenderData[0].EndTime</a>
                                    | Customer Count: <strong> @((int)(Model.ShiftWisetenderData[0].CustomerCount))</strong>
                                </p>
                            </div>
                            <div class="col-md-6 col-sm-3">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="datagrid mt-5 shiftwisereport">
                                    @{
                                        decimal Total = 0;
                                        decimal PaidTotal = 0;

                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover" id="data_table">
                                                <thead>
                                                    <tr>
                                                        <th valign="top" class="selectboxtd wdth100px" style="width:15%;">
                                                            <div class="set1">
                                                                <span>Select</span>
                                                                <span>
                                                                    @Html.HiddenFor(model => Model.terminal_id)
                                                                    @Html.DropDownListFor(model => Model.ShiftWisetenderData[0].ShiftName, new SelectList(Model.ShiftWisetenderData[0].ShiftNameList, "Text", "Text", Model.ShiftWisetenderData[0].ShiftName), "Shift#", new { id = "SelectShift_", @class = "myval Width" })
                                                                </span>
                                                            </div>
                                                        </th>
                                                        <th class="tabright col-md-2" style="text-align:center;">
                                                            Net Sales With Taxes
                                                            <span class="fnt25" style="text-align:center;">$ @AdminSiteConfiguration.PriceWithComma(@Model.ShiftWisetenderData[0].SalesAmount.ToString())</span>
                                                        </th>
                                                        <th class="tabright col-md-2" style="text-align:center;">
                                                            Tax Collected
                                                            <span class="fnt25" style="text-align:center;">$ @AdminSiteConfiguration.PriceWithComma(@Model.ShiftWisetenderData[0].TotalTaxAmount.ToString())</span>
                                                        </th>
                                                        <th class="tabright col-md-2" style="text-align:center;width:30%;">
                                                            <span style="float:left;width:50%;">
                                                                Average Sales
                                                                <span class="fnt25" style="text-align:center;" id="lblTotalAvgSale1">$ @AdminSiteConfiguration.PriceWithComma(@Model.ShiftWisetenderData[0].AvgSales.ToString())</span>
                                                            </span>
                                                            <span style="float:right;width:50%;">
                                                                Returns
                                                                <span class="fnt25" style="text-align:center;">$ @AdminSiteConfiguration.PriceWithComma(@Model.ShiftWisetenderData[0].CashierNegative.ToString())</span>
                                                            </span>
                                                        </th>
                                                        <th valign="top" class="col-md-3" style="text-align: right;">
                                                            <div class="set1">
                                                                <span>
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].Id)
                                                                    @Html.Hidden("SalesActivityId", @Model.ShiftWisetenderData[0].Id, new { @id = "SalesActivityId" })
                                                                    Cashier's Name
                                                                </span>
                                                                <span>@Html.TextBoxFor(model => Model.ShiftWisetenderData[0].CashierName, new { @maxlength = "50", @class = "form-control text-center required", @id = "CashierName_", @onchange = "ChackCashierName()" }) <br /></span>
                                                            </div>

                                                            <span class="highlight" id="Cashier_Name"> Cashier Name is Required</span>
                                                        </th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @for (int c = 0; c < Model.ShiftWisetenderData[0].TenderList.Count; c++)
                                                    {
                                                        <tr>
                                                            @{decimal sTotal = 0;
                                                            }
                                                            <td colspan="4" class="creditcadboxlist">
                                                                @Model.ShiftWisetenderData[0].TenderList[c].Name
                                                                @if (Model.ShiftWisetenderData[0].TenderList[c].Name.ToLower().Contains("credit card") && !Model.ShiftWisetenderData[0].TenderList[c].Name.ToLower().Contains("offline (house account)"))
                                                                {
                                                                    <img src="~/Content/image/AMEX.png" style="height: 40px;width: 60px;" />
                                                                    @Html.TextBoxFor(model => Model.AMEX, new { @placeholder = "- AMEX", @maxlength = "18", @class = "form-control decimalOnly required TextboxWidth", @style = "text-align:right;font-size: large;margin-right:25px !Important", @onchange = "CreditTotal()" })
                                                                    <img src="~/Content/image/DISCOVER.png" style="height: 40px;width: 60px;" />
                                                                    @Html.TextBoxFor(model => Model.Discover, new { @placeholder = "- Discover", @maxlength = "18", @class = "form-control decimalOnly required TextboxWidth", @style = "text-align:right;font-size: large;width:125px;margin-right:25px !Important", @onchange = "CreditTotal()" })
                                                                    <img src="~/Content/image/MASTER.png" style="height: 40px;width: 60px;" />
                                                                    @Html.TextBoxFor(model => Model.Master, new { @placeholder = "- Master", @maxlength = "18", @class = "form-control decimalOnly required TextboxWidth", @style = "text-align:right;font-size: large;margin-right:25px !Important", @onchange = "CreditTotal()" })
                                                                    <img src="~/Content/image/VISA.png" style="height: 40px;width: 60px;" />
                                                                    @Html.TextBoxFor(model => Model.Visa, new { @placeholder = "- Visa", @maxlength = "18", @class = "form-control decimalOnly required TextboxWidth", @style = "text-align:right;font-size: large;margin-right:25px !Important", @onchange = "CreditTotal()" })
                                                                    <img src="~/Content/image/CCOffline.png" style="height: 40px;width: 60px;" />
                                                                    @Html.TextBoxFor(model => Model.CCOffline, new { @placeholder = "- CC Offline", @maxlength = "18", @class = "form-control decimalOnly required TextboxWidth", @style = "text-align:right;font-size: large;margin-right:25px !Important", @onchange = "CreditTotal()" })
                                                                    @Html.Hidden("namea", Model.ShiftWisetenderData[0].TenderList[c].Amount, new { @id = "SumCreditValue" })
                                                                    <span class="highlight" id="CreditAlert">Amount Must be Less Then Total Credit Value</span>
                                                                    sTotal = Convert.ToDecimal(Model.AMEX) + Convert.ToDecimal(Model.Discover) + Convert.ToDecimal(Model.Master) + Convert.ToDecimal(Model.Visa) + Convert.ToDecimal(Model.CCOffline);
                                                                }
                                                            </td>
                                                            @if (Model.ShiftWisetenderData[0].TenderList[c].IsManually == true)
                                                            {
                                                                <td class="text-right" style="display:flex">
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].Id)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].ListName)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].Name)
                                                                    @Html.TextBoxFor(model => Model.ShiftWisetenderData[0].TenderList[c].Amount, new
                                                               {
                                                                   @maxlength = "18",
                                                                   @class = "form-control decimalOnly required TotalValue test2",
                                                                   @style = "text-align:right;font-size: large;",
                                                                   @id = "Amount_" + c,
                                                                   @onchange = "CreditTotal()"
                                                               })
                                                                    <span class="highlight"> @Html.ValidationMessageFor(model => Model.ShiftWisetenderData[0].TenderList[c].Amount)</span>
                                                                    @{
                                                                        decimal amount = Convert.ToDecimal(Model.ShiftWisetenderData[0].TenderList[c].Amount);
                                                                        Total += amount;
                                                                    }
                                                                    @if (Model.ShiftWisetenderData[0].TenderList[c].IsManually == true)
                                                                    {
                                                                        <a href="#" class="" title="Delete" data-toggle="tooltip" onclick="return DeleteTenderManualEntry(@Model.ShiftWisetenderData[0].TenderList[c].Id)" data-placement="top" data-original-title="Delete"><img src="~/Content/Admin/images/trash-2.svg" alt="" /></a>
                                                                    }
                                                                </td>
                                                            }
                                                            else
                                                            {
                                                                <td class="text-right">
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].Id)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].ListName)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].TenderList[c].Name)
                                                                    @Html.TextBoxFor(model => Model.ShiftWisetenderData[0].TenderList[c].Amount, new
                                                                    {
                                                                       @maxlength = "18",
                                                                       @class = "form-control decimalOnly required TotalValue test2",
                                                                       @style = "text-align:right;font-size: large;",
                                                                       @id = "Amount_" + c,
                                                                       @onchange = "CreditTotal()"
                                                                    })
                                                                    <span class="highlight"> @Html.ValidationMessageFor(model => Model.ShiftWisetenderData[0].TenderList[c].Amount)</span>
                                                                    @{
                                                                        decimal amount = Convert.ToDecimal(Model.ShiftWisetenderData[0].TenderList[c].Amount);
                                                                        Total += amount;
                                                                    }
                                                                </td>
                                                            }
                                                        </tr>
                                                        var DivId = Model.ShiftWisetenderData[0].TenderList[c].Id;
                                                        <div id="@DivId" class="divIDClass modal-popup modal-danger modal-message" style="position: fixed;font-size:17px;font-weight:700;  left:45%; width:300px; top: 10px; display:none">
                                                            <div class="modal-content ">
                                                                <div class="modal-header text-center">
                                                                    <i class="glyphicon glyphicon-trash"></i>
                                                                </div>
                                                                <div class="modal-title">Message</div>
                                                                <div class="modal-body ">Are you sure you want to delete this Entry?</div>
                                                                <div class="modal-footer" style="text-align:center">
                                                                    <a class="btn btn-danger" style="border-radius:0px;" onclick="DeleteTenderManual('@Model.ShiftWisetenderData[0].TenderList[c].Id')">Yes </a>
                                                                    <a class="btn" data-dismiss="modal" style="border-radius:0px;color:#3c7be5;" onclick="closemodal()">No</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                    @if (Model.ShiftWisetenderData[0].paidoutLists != null)
                                                    {
                                                        for (int c = 0; c < Model.ShiftWisetenderData[0].paidoutLists.Count; c++)
                                                        {

                                                            <tr>
                                                                <td colspan="4" style="background: #F8F6E7;padding: 30px !important;">
                                                                    @Model.ShiftWisetenderData[0].paidoutLists[c].Title
                                                                    <input type="button" name="btnAddCashInvoice" value="+ Add Invoice" id="btnAddCashInvoice" onclick="return CahInvoicePopup(@Model.ShiftWisetenderData[0].paidoutLists[c].Id,@Model.ShiftWisetenderData[0].paidoutLists[c].Amount)" class="buttonbox btnsubmit btn_spcial" style="border-radius: 20px !important;    width: auto !important;    padding: 6px 15px !important;    background: black !important;" />
                                                                </td>

                                                                <td class="text-right" style="background: #F8F6E7;padding: 10px 20px !important;">
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].paidoutLists[c].Id)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].paidoutLists[c].ListName)
                                                                    @Html.HiddenFor(model => Model.ShiftWisetenderData[0].paidoutLists[c].Title)
                                                                    @Html.TextBoxFor(model => Model.ShiftWisetenderData[0].paidoutLists[c].Amount, new
                                                               {
                                                                   @maxlength = "18",
                                                                   @class = "form-control decimalOnly required test2",
                                                                   @readonly = "readonly",
                                                                   @style = "text-align:right;font-size: large;",
                                                                   @id = "PaidAmount_" + c
                                                                    })
                                                                    <span class="highlight"> @Html.ValidationMessageFor(model => Model.ShiftWisetenderData[0].paidoutLists[c].Amount)</span>
                                                                    @{
                                                                        decimal amount = Convert.ToDecimal(Model.ShiftWisetenderData[0].paidoutLists[c].Amount);
                                                                        Total += amount;
                                                                    }
                                                                </td>
                                                            </tr>

                                                            if (Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice != null)
                                                            {
                                                                if (Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice.Count > 0)
                                                                {
                                                                    <tr style="background: #F8F6E7;">
                                                                        <td colspan="5">
                                                                            <table class="table table-striped table-hover" style="background:rgba(0,0,0,0.2) !important;width:90% !Important;margin:auto !Important" id="data_table" align="center">
                                                                                @if (Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice.Count > 0)
                                                                                {
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td>Vendor Name</td>
                                                                                            <td class="text-center">Invoice Number</td>
                                                                                            <td class="text-right">Invoice Amount</td>
                                                                                            <td class="text-right">Action</td>
                                                                                        </tr>
                                                                                    </thead>
                                                                                }
                                                                                <tbody>
                                                                                    @for (int d = 0; d < Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice.Count; d++)
                                                                                    {
                                                                                        <tr style="background: rgba(0,0,0,0.1);border-radius: 0px !important;display: table-row;">
                                                                                            <td class="text-left" width="65%">
                                                                                                @Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].VendorNAme
                                                                                            </td>
                                                                                            <td class="text-center" width="15%">
                                                                                                <a target="_blank" style="color: #3c7be5;cursor: pointer;" onclick="setitem()" href="@Url.Action("Details", "Invoices", new { Id = Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].InvoiceId })"><span style="font-weight: 600;font-size: 17px;"> @Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].Invoiceno</span></a>
                                                                                            </td>
                                                                                            <td class="text-right" width="20%">
                                                                                                $ @Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].Totalamount
                                                                                            </td>
                                                                                            <td>
                                                                                                <a href="#" onclick="return ComfirmDeleteCashInvoice(@Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].InvoiceId);" data-toggle="tooltip" data-placement="top" data-original-title="Delete"><img src="~/Content/Admin/images/trash-2.svg" alt="" /> </a>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <div id="divCashInvoice_@Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].InvoiceId" class="divIDClass modal-popup modal-danger modal-message " style="position: fixed;  left:45%; width:300px; top: 10px; display:none">
                                                                                            <div class="modal-content ">
                                                                                                <div class="modal-header text-center">
                                                                                                    <i class="glyphicon glyphicon-trash"></i>
                                                                                                </div>
                                                                                                <div class="modal-title">Message</div>
                                                                                                <div class="modal-body"><p id="deleModalbody"> Are you sure you want to delete this Invoice?</p></div>
                                                                                                <div class="modal-footer" style="text-align:center">
                                                                                                    <a class="btn btn-danger" style="border-radius:unset;" onclick="DeleteCashInvoicemodal(@Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].InvoiceId);">Ok </a>
                                                                                                    <a class="btn" data-dismiss="modal" style="color:blue;border-radius:unset;" onclick="closeCashInvoicemodal()">Cancel</a>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        PaidTotal += Convert.ToDecimal(Model.ShiftWisetenderData[0].paidoutLists[c].BindCase_PaidOut_Invoice[d].Totalamount);
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                }

                                                                <tr>
                                                                    <td colspan="5">
                                                                        <table style="width:100%;">
                                                                            <tr style="text-align:right;">
                                                                                <td>
                                                                                    <span style="font-weight:300;">Settle</span>
                                                                                    &nbsp;
                                                                                    @if (Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList.Count > 0)
                                                                                    {
                                                                                        <input type="checkbox" name="check-3" value="3" class="lcs_check" checked="checked" autocomplete="off" />
                                                                                        <span style="font-weight:300;">Difference</span> <strong> $ <span id="PaidOutAmount">0.00</span> </strong>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <input type="checkbox" name="check-3" value="3" class="lcs_check" autocomplete="off" />
                                                                                        <span style="font-weight:300;">Difference</span> <strong> $ <span id="PaidOutAmount">@(Model.ShiftWisetenderData[0].paidoutLists[c].Amount - PaidTotal) </span></strong>
                                                                                    }
                                                                                </td>
                                                                            </tr>
                                                                            <tr style="text-align:center;" id="SettlementRow">
                                                                                <td>
                                                                                    <span>
                                                                                        Title @Html.TextBox("SettlementTitle", "", new { @maxlength = "50", @class = "form-control settlemntdisplay", @id = "txtSettlement" })
                                                                                        <span class="highlight" id="SettlementTitleIsReq">Title Is Required</span>
                                                                                        &nbsp;&nbsp;
                                                                                        Amount @Html.TextBox("SettlementAmount", (Model.ShiftWisetenderData[0].paidoutLists[c].Amount - PaidTotal), new { @maxlength = "50", @class = "form-control SettlementAmount", @readonly = "readonly", @id = "txtSettlementAmount" })
                                                                                        &nbsp;&nbsp;
                                                                                        <input type="button" name="btnSaveSettlement" value="Save" id="btnSaveSettlement" onclick="SaveSettlementEntry()" class="buttonbox btnsubmit btn_spcial" style="border-radius: 20px !important;    width: auto !important;    padding: 6px 15px !important;    background: black !important;" />
                                                                                    </span>
                                                                                </td>
                                                                            </tr>
                                                                        </table>

                                                                    </td>
                                                                </tr>
                                                                if (Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList.Count > 0)
                                                                {
                                                                    <tr>
                                                                        <td colspan="5">
                                                                            <span>Settlement Description</span> <br /><br />
                                                                            <table class="table table-striped table-hover" style="background:rgba(0,0,0,0.2) !important;width:90% !Important;margin:auto !Important" id="data_table" align="center">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <td class="text-left" width="65%">Title</td>
                                                                                        <td class="text-center" width="15%">Amount</td>
                                                                                        <td class="text-right"></td>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @for (int d = 0; d < Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList.Count; d++)
                                                                                    {
                                                                                        <tr style="background: rgba(0,0,0,0.1);border-radius: 0px !important;display: table-row;">
                                                                                            <td class="text-left" width="65%">
                                                                                                @Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList[d].Title
                                                                                            </td>
                                                                                            <td class="text-center" width="15%">
                                                                                                $ @Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList[d].Amount
                                                                                            </td>
                                                                                            <td class="text-right" width="20%">
                                                                                                <a onclick="ConfirmDelete_Settlement('@Model.ShiftWisetenderData[0].paidoutLists[c].PaidOut_SettlementList[d].Id')" href="#"><img src="~/Content/Admin/images/trash-2.svg" alt="" /></a>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }

                                                        }

                                                    }
                                            </table>
                                            <span id="AddMoreName" class="highlight">Please Fill Blank fields</span>
                                            <div class="addrowbox">
                                                <input type="button" class="add-row" value="+ Add Row">
                                            </div>

                                            <div class="totalbox">
                                                <div class="totalttl" style="align-items:end; display: inline !important;">
                                                    <h2 style="color:#979696;margin-top:0px;"> Actual Grand Total</h2>
                                                    <h3 style="color:#979696;margin-top:25px;"> Notes</h3>
                                                    @Html.TextAreaFor(model => Model.ShiftWisetenderData[0].Notes, new { @maxlength = "250", @class = "form-control", @style = "width: 800px !important;height: 72px;" })
                                                </div>
                                                <div class="grandtotalvalue">
                                                    @{decimal Totalbypaidamt = Total;}
                                                    @Html.Hidden("txtPaidTotal1", PaidTotal)
                                                    <div id="divActualTotal">$ @AdminSiteConfiguration.PriceWithComma(Totalbypaidamt.ToString())</div>
                                                    <div class="set_calss1">

                                                        @{decimal FinalAmount = 0;
                                                        }
                                                        @{
                                                            decimal TotalOtheramt = 0;
                                                            if (Model.OtherDepositList != null)
                                                            {
                                                                for (int c = 0; c < Model.OtherDepositList.Count; c++)
                                                                {
                                                                    if (Model.OtherDepositList[c].payment.ToString() == "" || Model.OtherDepositList[c].payment.ToString().ToLower() == "check")
                                                                    {
                                                                        TotalOtheramt += Convert.ToDecimal(Model.OtherDepositList[c].amount);
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        <br />
                                                        @{
                                                            var Difference = Totalbypaidamt - Model.ShiftWisetenderData[0].SalesAmount;
                                                            <div class="divOverspan">
                                                                @if (Difference == 0)
                                                                {
                                                                    <span style="font-size: 40px !important;color: #000000;font-weight: 500; text-align: right;">Over/Short <b id="divOverspan0" style="color:grey;font-size: 40px !important;font-weight: 300; text-align: right;">$ @AdminSiteConfiguration.PriceWithComma(Difference.ToString())</b></span>
                                                                }
                                                                else if (Totalbypaidamt > Model.ShiftWisetenderData[0].SalesAmount) /*Total*/
                                                                {
                                                                    <span style="font-size: 40px !important;color: #000000;font-weight: 500; text-align: right;">Over/Short <b id="divOverspan1" style="color:green;font-size: 40px !important;font-weight: 300; text-align: right;">$ @AdminSiteConfiguration.PriceWithComma(Difference.ToString())</b></span>
                                                                }
                                                                else if (Totalbypaidamt < Model.ShiftWisetenderData[0].SalesAmount)
                                                                {
                                                                    <span style="font-size: 40px !important;color: #000000;font-weight: 500; text-align: right;">Over/Short <b id="divOverspan2"><span class="colorRed" style="font-size: 40px !important;font-weight: 300; text-align: right;"> $ @AdminSiteConfiguration.PriceWithComma(Difference.ToString())</span></b></span>
                                                                }
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="savebtnarea">
                                    @{
                                        <input type="submit" id="SubmitShift" value="Save" style="width:100%" onclick="ChackCashierName();" name="" class="btn btnsavebox" />
                                    }
                                    @Html.HiddenFor(a => a.ShiftWisetenderData[0].SalesAmount, new { @id = "txtSalesAmount" })
                                </div>
                            </div>
                        </div>
                    }
                </div>

            }
        }

    </div>
    <div id="PopDeleteSettlementEntry" class="divSettlementClass modal-popup modal-danger modal-message" style="position: fixed;  left:45%; width:300px; top: 35%; display:none; z-index:999999999999!important;">
        <div class="modal-content ">
            <div class="modal-header text-center">
                <i class="glyphicon glyphicon-trash"></i>
            </div>
            <div class="modal-title"></div>
            <div class="modal-body ">
                Are you sure you want to delete this Entry?
                <input type="hidden" id="SettlementId" name="SettlementId" />
            </div>
            <div class="modal-footer" style="text-align:center">
                <a class="btn btn-danger" style="border-radius:unset;" onclick="delete_SettlementEntry()">Yes </a>
                <a class="btn" data-dismiss="modal" style="color:blue;border-radius:unset;" onclick="closeSettlementmodal()">No</a>
            </div>
        </div>
    </div>

</div>

<div id="divCash" class="divIDClass2 modal-popup modal-danger modal-message" style="position: fixed;  transform:translate(0%, 0%); width:94.5vw; top: 80px; display:none;">
    <div class="modal-content ">
        <div class="modal-header" style="font-size: 18px;font-weight: bold;">
            Add Cash Invoice
            <button type="button" class="close" id="btnCloseCashInvoice" onclick="closecashmodal()" style="margin-right:1%;">&times;</button>
        </div>
        <div class="modal-body" id="ModelContents" style="height: 100vh;overflow-y: auto;max-height: calc(100vh - 100px);  "></div> @*  max-height: calc(100vh - 210px); overflow-y: auto;*@
        <input type="hidden" id="txtPaidAmt" />
        <input type="hidden" id="txtTerminalId" />
        <input type="hidden" id="txtShiftId" />
        <input type="hidden" id="txtPaidOutID" />
        <input type="hidden" id="txtPaidTotal" />
        <input type="hidden" id="txtInvDate" />
    </div>
</div>

<script>
    function docReady(fn) {
        // see if DOM is already available
        if (document.readyState === "complete" || document.readyState === "interactive") {
            // call on next available tick
            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }
    docReady(function () {

        const checkboxes = 'input[name=check-3]'
        lc_switch(checkboxes);
        var aa = 0;
        var ISSetlle = '@ViewBag.IsSettlementDone';
        var IsSettleCount = '@ViewBag.PaidOut_SettlementCount';

        if (ISSetlle == '1') {
            $("#btnAddCashInvoice").prop("disabled", true);
            lcs_disable('input[name=check-3]');
            $("#txtSettlementDone").val("1");
        }
        else {
            if (IsSettleCount != '0') {
                aa = '@ViewBag.PaidOut_SettlementCount';
                if (aa != '0') {
                    lcs_disable('input[name=check-3]');
                    //$(".lcs_checkbox_switch").prop("disabled", true);
                    $("#btnAddCashInvoice").prop("disabled", true);
                    $("#txtSettlementDone").val("1");
                }
            }
            else {
                lcs_enable('input[name=check-3]');
                $("#btnAddCashInvoice").prop("disabled", false);
                $("#txtSettlementDone").val("2");
            }
        }

        $('#CreditAlert').hide();
        $('#AddMoreName').hide();

        $(".add-row").click(function () {
            var table = document.getElementById("data_table");
            var table_len = (table.rows.length);
            var row = table.insertRow(table_len).outerHTML = "<tr id='row" + table_len + "'><td colspan=4><input type='text' name='Title' id='Title' maxlength='40' style='width: 88%;text-align:left;' class='form-control width195 required'/></td><td class='text-right'><input type='text' name='Amount' maxlength='18' id='Amount' class='form-control decimalOnly width195' style='text-align:right;font-size: large;width:84%;'/> <input type='button' value='Delete' class='delete_btn' onclick='delete_row(" + table_len + ")'></td></tr>";
            $(".decimalOnly").bind('keypress', function isNumberKey(evt) {
                var charCode = (evt.which) ? evt.which : event.keyCode
                if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 46 && charCode !== 45)
                    return false;

                return true;
            });
            $(".decimalOnly").bind("paste", function (e) {
                e.preventDefault();
            });
        });

         var aa = @ViewBag.EmptyTender;
        if (aa != '1') {
        }
        else {
            var _getValue = '@(AdminSiteConfiguration.RoundPriceWithComma(Convert.ToString(@ViewBag.CustomerCount)) == "" ? "isNull" : "notNull")';
            if (_getValue === 'isNull') {
                $("#lblCustomerCount").text("");
            }
            else {
                $("#lblCustomerCount").text(@AdminSiteConfiguration.RoundPriceWithComma(Convert.ToString(@ViewBag.CustomerCount)));
            }
        }

        $(document).on('lcs-statuschange', '.lcs_check', function () {
            var status = ($(this).is(':checked')) ? 'checked' : 'unchecked';
            if (status == "checked" && aa == 0) {
                $("#SettlementRow").show();
            }
            else {
                $("#SettlementRow").hide();
            }
        });
        document.querySelectorAll('input[name=check-3]').forEach(function (el) {
            let status = (el.checked) ? 'checked' : 'unchecked';
            if (status == 'unchecked') {
                $("#SettlementRow").hide();
            }
        });
        $("#SettlementTitleIsReq").hide();

        CreditTotal();
    });

    var searchdashbord = '@ViewBag.searchdashbord';
    var terminal_id ='@Model.terminal_id';
</script>
<script src="~/Form_JS/TerminalShiftWisetenderGrid.js?version=@System.Configuration.ConfigurationManager.AppSettings["version"].ToString()"></script>
