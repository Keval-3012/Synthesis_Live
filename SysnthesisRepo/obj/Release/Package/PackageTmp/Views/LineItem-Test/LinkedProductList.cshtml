@using Syncfusion.EJ2
<style>
    #ajax_dialog1_dialog-header {
        padding: 12px 14px 12px 12px !important;
    }

    .heading {
        color: white;
        font-size: 16px;
    }

</style>
@{
    /* Custom toolbar item */
    List<object> toolbarItems = new List<object>();
    /* The template id is set to the custom toolbar item’s template property */
    toolbarItems.Add(new { template = "#searchlinkTemplate" });

}

<div class="control-section">
    @Html.EJS().Grid("InlineEditing3").AllowSorting().AllowFiltering().FilterSettings(filter => { filter.Type(Syncfusion.EJ2.Grids.FilterType.CheckBox); }).DataSource((IEnumerable<object>)ViewBag.DataSourse).AllowTextWrap().Columns(col =>
{
    col.Field("InvoiceProductId").IsPrimaryKey(true).HeaderText("Invoice Product Id").Visible(false).Add();
    col.Field("ProductId").HeaderText("Product ID").Visible(false).Add();
    col.Field("UPCCode").HeaderText("UPC Code").Width("150").Add();
    col.Field("ItemNo").HeaderText("Item No").Width("100").Add();
    col.Field("Brand").HeaderText("Brand").Width("150").Add();
    col.Field("Size").HeaderText("Size").Width("100").Add();
    col.Field("Description").HeaderText("Description").Width("300").Filter(new { type = "Menu" }).ClipMode(Syncfusion.EJ2.Grids.ClipMode.EllipsisWithTooltip).Add();
}).DataBound("dataBound").Toolbar(toolbarItems).Render()
</div>

<div id='searchlinkTemplate' class="searchlinkTemplate" style="display:none">
    <div class="e-toolbar-items e-tbar-pos">
        <div class="e-toolbar-left">
            <div class="e-toolbar-item" aria-disabled="false">
                <label class="heading">Linked Product</label>
            </div>
        </div>

        <div class="e-toolbar-right">
            <div class="e-toolbar-item e-search-wrapper" aria-disabled="false" title="Search">
                <div class="e-input-group e-search clear" role="search">
                    <input id="InlineEditing3_searchbar" class="e-input searchTextBox" name="input" type="search" placeholder="Search">
                    <span id="InlineEditing3_searchbutton" class="e-input-group-icon e-search-icon e-icons" tabindex="-1" title="Search" aria-label="search" style="display:none"></span>
                    <span class="e-clear-icon" id="InlineEditing3_searchcancelbutton"></span>
                </div>
            </div>
        </div>

    </div>
</div>

<script>

    $("body").on("click", "#InlineEditing3_searchbutton", function () {
        
        var grid = document.getElementById('InlineEditing3').ej2_instances[0];
        var value = document.getElementById("InlineEditing3_searchbar").value;
        grid.search(value);
    });

    function dataBound(e) {

        var grid = document.getElementById("InlineEditing3").ej2_instances[0];
        //  checks whether the cancel icon is already present or not
        if (!grid.element.getElementsByClassName('e-search')[0].classList.contains('clear')) {
            var span = ej.base.createElement('span', {
                id: grid.element.id + '_searchcancelbutton',
                className: 'e-clear-icon'
            });
            span.addEventListener('click', (args) => {
                document.querySelector('.e-search').getElementsByTagName('input')[0] = "";
                grid.search("");
            });
            grid.element.getElementsByClassName('e-search')[0].appendChild(span);
            grid.element.getElementsByClassName('e-search')[0].classList.add('clear');
        }

    }
</script>
@Html.EJS().ScriptManager()

